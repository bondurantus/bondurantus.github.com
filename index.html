<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Loren Bondurant</title>
  <meta name="description" content="Letterforms and human forms">
  <meta name="author" content="Loren Bondurant">
  <link rel="stylesheet" href="stylesheets/bondurant.css"/>
</head>
<body>
  <header>
    <img src=http://farm9.staticflickr.com/8098/8574914381_4592d105dd.jpg>

    <nav role="navigation">
      <a id="about-link" href="#"><i>About</i></a> | <a href="http://lorenbondurant.tumblr.com/"><i>Blog</i></a>
    </nav>
  </header>

  <script type="text/javascript">
      window._idl = {};
      _idl.variant = "modal";
      (function() {
          var idl = document.createElement('script');
          idl.type = 'text/javascript';
          idl.async = true;
          idl.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'members.internetdefenseleague.org/include/?url=' + (_idl.url || '') + '&campaign=' + (_idl.campaign || '') + '&variant=' + (_idl.variant || 'banner');
          document.getElementsByTagName('body')[0].appendChild(idl);
      })();
  </script>

  <div id="red-line">&nbsp;</div>

  <div id="about">
    <p>LOREN BONDURANT's drawings incorporate letterforms and the human figure.  He lives in San Francisco, US.<p>
    <p>For comic books and other prints, look <a href="http://lorenbondurant.us/crencom">here</a>.</p>
    <p><div class="genericon genericon-mail"></div>Other inquiries: <a href="mailto:loren.bondurant@gmail.com">loren.bondurant@gmail.com</a>.</p>
  </div>

  <div id="main">
    <div id="left">
      <div class="images">
        <div class="image">
          <img src="http://farm9.staticflickr.com/8235/8488626172_b17d890198_b.jpg">
          <div class="caption">GOTTFRIED BENN, in semi-formal roman capitals. Ink on paper, 2013.</div>
        </div>

        <div class="image">
          <img src="http://farm6.staticflickr.com/5129/5321773529_a08eaa1b75_z.jpg">
          <div class="caption">ADVICE BOX. Burned wood, 2010.</div>
        </div>

        <div class="image">
          <img src="http://farm8.staticflickr.com/7050/6886767869_7566bf1247_z.jpg">
          <div class="caption">
            VERLAINE. Watercolor on paper, 2012.
          </div>
        </div>

        <div class="image">
          <img src="http://farm6.staticflickr.com/5283/5369617179_84f60c1c62_b.jpg">
          <div class="caption">
            NERUDA, in monoline letterforms. Ink on paper, 2010.
          </div>
        </div>

        <div class="image">
          <img src="http://farm7.staticflickr.com/6121/6000275659_650efd0998_b.jpg">
          <div class="caption">
            WM. T. WILEY, in uncial. Ink on paper, 2011.
          </div>
        </div>

        <div class="image">
          <img src="http://farm9.staticflickr.com/8304/7990782102_b9a11e0541_b.jpg">
          <div class="caption">
            REVENGE, in roman capitals. Pencil and gouache on paper, 2012.
          </div>
        </div>

        <!-- end calligraphy images -->
      </div>

      <div class="count">
        <span class="current">1</span> of <span class="total"></span>
      </div>
    </div>

    <div id="right">
      <div class="images">

        <div class="image">
          <img src="http://farm8.staticflickr.com/7137/8162123035_0d350836c6_c.jpg">
          <div class="caption">TAYLOR SWIFT. Ink on paper, 2012.</div>
        </div>

        <div class="image">
          <img src="http://farm9.staticflickr.com/8291/7870624708_7d69c7f7c0_c.jpg">
          <div class="caption">ENVELOPE. Ink on paper, 2012.</div>
        </div>

        <div class="image">
          <img src="http://farm9.staticflickr.com/8449/8056620065_3334169a0e_c.jpg">
          <div class="caption">
            MISSION GIRL. Ink on paper, 2012.
          </div>
        </div>

        <div class="image">
          <img src="http://farm9.staticflickr.com/8220/8416075076_729dafdf23_z.jpg">
          <div class="caption">
            GAUGUIN'S PORTAL. Watercolor and ink on paper, 2013.
          </div>
        </div>

        <div class="image">
          <img src="http://farm6.staticflickr.com/5185/5659504208_fe16da7f3e_z.jpg">
          <div class="caption">
            NEW ORLEANS. Watercolor on paper, 2011.
          </div>
        </div>

        <!-- end illos images -->
      </div>

      <div class="count">
        <span class="current">1</span> of <span class="total"></span>
      </div>
    </div>

  </div>

  <footer style="text-align:right;">
    <small>All images <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-nd/3.0/80x15.png"/></a> Loren Bondurant <time datetime="2013">2013</time>. Please do not use without <a href="mailto:loren.bondurant@gmail.com">permission</a>.</p></small>
  </footer>

  <script src="/javascripts/jquery.min.js"></script>
  <script src="/javascripts/underscore.min.js"></script>
  <script>
    $(document).ready(function () {
      var imageHeight = 570;
      $('#about-link').on('click', function () {
        $('#about').toggleClass('active');
        return false;
      });

      var splitEquals = function (str) {
        return str.split("=");
      }

      var parseHash = function(hash) {
        var subst = hash.substring(1).split('&');

        var obj = _.object(_.map(subst, splitEquals));

        if (!_.has(obj, 'left') && !_.has(obj, 'right')) {
          obj = {'left':1,'right':1};
        }
        return obj;
      }

      var getCurrentImage = function (v,k) {
        return k + '=' + ($('#' + k).find('.active').index() + 1);
      }

      var updateHash = function (obj) {
        return _.map(obj, getCurrentImage).join('&');
      }

      var getActive = function (container, callback) {
        var active = container.find('.active').first();
        var images = container.find('.image');
        var count = images.length;
        return callback(container, active.index(), count);
      }

      var setActive = function(container, i) {
        container.find('.image').eq(i).addClass('active');
        container.find('.image').eq(i).siblings().removeClass('active');
        container.find('.images').css('top', (i)*imageHeight * -1);
      }

      var getNext = function (container, index, count) {
        return (index+1) % count;
      }

      var incrementCounter = function (container, number) {
        container.find('.current').html(number+1);
      }


      var goToNext = function() {
        var nextIndex = getActive($(this), getNext);
        var next = $(this).find('.image').eq(nextIndex);
        incrementCounter($(this), nextIndex);

        console.log(nextIndex, next)

        setActive($(this), nextIndex);

        window.location.hash = updateHash(parseHash(window.location.hash));

        return false;
      }

      var setImagesFromHash = function () {
        var parsed = parseHash(window.location.hash);

        _.each(parsed, function(v,k) {
          setActive($('#'+k), parseInt(v)-1);
          incrementCounter($('#' + k), parseInt(v)-1);
        });
      }

      _.forEach(['#left','#right'], function(div) {
        var images_count = $(div).find('.image').length;
        $(div).find('.image').first().addClass('active');
        $(div).find('.images').css('top',0);
        $(div).find('.total').html(images_count);
        $(div).click(goToNext);

        if (window.location.hash.substring(1).length > 0) {
          setImagesFromHash();
        }
      });

    });
  </script>

  <!-- google analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36710433-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</body>
</html>
